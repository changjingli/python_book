# 第一个 Python 程序

## 欢迎进入编程世界！

这是编程语言书籍的一个传统，第一句话永远是上面这句问候。而第一个编写的程序就是打印出“Hello World!”这句话。我们也沿用这一传统，从 Hello World 开始。

实现这一功能只需要运行以下的[语句](condition#语句)：

```python
print("Hello, World!")
```

### 使用在线编辑环境

使用在线编辑环境非常简单，不要任何额外工作。打开编辑环境的页面，输入上面那句代码，运行即可。比如： <https://qizhen.xyz/python> 或者 <https://qizhen.xyz/brython>

### 直接在 Python 解释器中运行

如果不使用任何 IDE，那么可以打开计算机的命令行终端，然后输入 `python` 并回车，系统会启动 Python 解释器。读者现在应该看到 >>> 这样的提示符，表示 Python 解释器已经准备好接受命令了。

在 >>> 提示符后，输入以下代码：

```python
print("Hello, World!")
```

然后回车。

读者应该看到输出为：

```
Hello, World!
```

恭喜！你刚刚编写并运行了你的第一个 Python 程序。

### 使用集成开发环境（IDE）

如果使用的是前文介绍过的任何一种集成开发环境编写程序，总是需要先创建一个文件来保存程序的。把下面这行文字复制到新建的文件里：

```python
print("Hello, World!")
```

然后保存从任何名为 *.py 的文件。在点击 IDE 上的运行按钮，就可以运行程序了。

### 运行一个 .py 文件

对于任何已经保存好的 .py 文件，我们在 IDE 中打开他们运行。也可以在命令行中端里运行它们。比如我们有一个名为“welcome.py”的文件，其内容是如下代码：

```python
name = input("你叫什么名？ ")
print(f"你好，{name}！欢迎来到 Python 的编程世界！")
```

打开命令行或终端，导航到 welcome.py 文件所在的目录。输入以下命令并回车：

```sh
python welcome.py
```

当程序提示输入名字时，输入你的名字并回车。

现在应该看到一个类似 `你好，ruanqizhen！欢迎来到 Python 的编程世界！` 的消息了。

## Python 的语法

Python 以其简洁明了的语法而著称。我们下面简要介绍一下 Python 的语法，主要是方便已有其它编程语言经验的读者快速熟悉 Python 的特点。对于没有经验的读者，如果觉得介绍的太过笼统，也不要紧，后文还会对它们做详细解析。

和大多数主流编程语言一样，Python 由一行一行的“[语句](#语句)”组成。比如下面的程序：

```python
print("Hello, World!")
```

在这一行语句中，“print”是一个[函数](function)的名字。如果读者没有接触过其它编程语言，可以把这里的函数想象成类似数学函数的概念，在函数名后面的括号中传入一个变量数据，函数就会产生相应的结果。在这里，输入的数据是一串字符“Hello, World!”。Python 语言中，双引号中间的内容表示字符串。“print”的运行结果是把输入的字符串打印在屏幕上。

如果运行：

```python
print(1+2)
```

这时候 print 函数的输入变成了一个[数值运算表达式](calculation)。Python 会首先计算这个表达式的值，然后再打印出结果“3”。

如果程序有多行代码，比如：

```python
name = input("你叫什么名？ ")
print(f"你好，{name}！欢迎来到 Python 的编程世界！")
```

那么程序一般会按照从上到下的顺序逐句运行。在上面的示例中，input 也是一个函数，跟 print 函数相似，它也会把它的参数打印在屏幕上，区别在于，input 函数会随后读取用户使用键盘输入的内容。name 是一个[变量](variable#变量)，用于保存 input 函数返回的数据，也就是用户使用键盘输入的内容。接下来的 print 函数会把它的数据，连同变量 name 里的内容一起打印在屏幕上。

程序语句通常由数据、变量、操作符、表达式等部分组成。下面我们详细解释一下这些部分以及一些其它常见编程术语的含义：

### 数据

数据（Data）是程序中存储和处理的基本信息。在上面示例程序中，我们看到的数字 1、2，文字 "Hello, World!" 等等都是程序中的数据。Python 支持多种数据类型，用于存储不同类型的信息。最常见的几种数据类型包括：
- 数字类型：如整数 int 和浮点数 float。例如：`42`, `3.14`
- 字符串类型：用引号括起来的字符序列，例如：`"Hello, World!"`
- 布尔类型：表示逻辑值 `True` 和 `False`，用于条件判断。
- 列表、字典等集合数据：用来存储多个数据项的集合，例如列表（list）可以包含多个元素 `[1, 2, 3]`，字典（dict）用键-值对存储数据 `{"name": "Alice", "age": 30}`。

关于数据，我们将在[数据与变量](variable)一节做详细介绍。

### 变量

变量（Variable）是用来保存数据的命名空间，可以将数据赋值给变量，通过变量来操作数据。在 Python 中，变量的定义不需要声明类型，可以直接赋值。例如：

```python
age = 25             # 整数类型
name = "Alice"       # 字符串类型
is_student = True    # 布尔类型
```

变量名可以包含字母、数字和下划线，不能以数字开头，通常遵循蛇形命名法（如 my_variable）。在[数据与变量](variable)一节，我们也会对变量做更详细的介绍。

### 操作符（Operator）

操作符是用于操作数据和变量的符号，比如，用于数学计算的加减乘除（`+` `-` `*` `/`）等操作符。Python 中还有用于处理其它类型数据的操作符，我们将会在[基础数学运算](calculation)一节详细介绍这些操作符。

### 关键字

在编程语言中，关键字（Keyword）是指被该语言赋予了特殊意义的词汇，用于定义语法和结构规则。关键字是编程语言的一部分，被预先定义在语言的规范中，我们在编程时，可以直接拿它们来用。由于关键字具有特殊的意义，它们作为保留字，只能用于特定用途，不能再被用作变量名、函数名或其他标识符。如果把关键字用作普通的标识符，比如变量名，将会导致语法错误。

Python 中常用的关键字包括 if, else, for 等。运行下面的代码可以打印出 Python 中所有的关键字：

```python
import keyword
print(keyword.kwlist)
```

我们将在后续章节分别对这些关键字做详细介绍。

### 表达式

表达式（Expression）是计算机科学中的一个术语，指一个可以计算出一个值的代码单元。它是由数据、变量和操作符组成的序列，总是产生或返回一个结果值。表达式可以非常简单，如单独一个数字、变量；或者更复杂，如整个数学公式或者函数调用等。

比如下面是一些表达式的例子：

- `3 + 4`  返回 7
- `"Hello" + " " + "World"`  返回 "Hello World"
- `my_function(2, 3)`  返回函数 my_function 的运行结果
- `print("Hello World")` 返回 None

有些函数看似没有返回结果，比如 print() 我们不会把它的返回值赋值给任何变量，比如  `x = print(1)`。但实际上，所有函数都有返回值，如果没有写明，则默认返回 None。

在 Python 中，我们可以把表达式放在任何需要一个值的地方，比如作为函数参数，作为 if 语句中的条件，作为其它表达式的一部分等。

表达式可以直接作为一行代码放在程序中。有些编辑环境在运行程序的时候，会把程序最后一行表达式的运算结果打印出来，以方便编程者查看。

### 语句

语句（Statement）是执行一个操作的完整命令。语句不像表达式那样返回值，它做的是指导程序去做某件事，例如声明一个变量、执行一个条件判断、执行一个循环等。比如：

- `x = 3 + 2` 赋值语句  
- `if x > 0`  条件控制语句

语句在 Python 中是一个完整的句子，它不能再成为其它语句或表达式的一部分了。

如果使用分号分隔每个语句，那么可以在一行代码中书写多个语句。其它一些编程语言也是这样的，但这样并不符合 Python 的编程规范。我们在编写程序的时候，每一行就应该只放置一条语句，以提高程序的清晰度和可读性。

### 注释

注释（Comment）用于对代码进行说明和解释，它不会影响程序的逻辑。注释通常是为了帮助更方便的阅读了理解程序。

Python 有两种方式添加注释：
- 单行注释：以 `#` 开头。在一行中，所有字符 `#` 之后的内容都是注释
- 多行注释：可以使用 ''' 或 """ 包裹的字符串作为注释。

上文介绍变量的示例程序中，就包含有注释：

```python
age = 25             # 整数类型
"""
这也是一段注释
"""
```

### 代码块

代码块（code block）是指由多行代码组成的结构，这些代码被组织在一起，用于完成一个特定的功能或逻辑单元。代码块通常用于[条件判断](condition)、[循环](loop)、[函数](function)、[类](class)等结构中，以便将代码逻辑清晰地划分和组织。

在多数编程语言中，代码块的界限通常由特定的符号（比如花括号 `{}`、小括号 `()`）或特定的关键字（比如 begin 和 end）等定义。在 Python 中，代码块的定义方式比较特殊，它依赖缩进来表示代码的层级和逻辑关系。

代码缩进是编程中的一个常见概念，指的是某一行代码行的起始部分有一定数量的空白空间，空白后面才是真正的代码。在那些使用特定符号定义代码块的语言中，代码缩进只是为了美观和提高可读性，代码缩进不会影响程序的逻辑。但由于 Python 利用缩进定义代码块的这种特殊设定，使得不同的缩进会改变程序的逻辑。

Python 的这种设计决策旨在使代码更加可读，并鼓励程序员写出结构清晰、整洁的代码。在同一个代码块中，每一行代码的缩进必须是一致的。这意味着，如果使用了四个空格作为缩进，那么整个代码块中必须都使用四个空格。官方 Python 样式指南（PEP 8）推荐使用 4 个空格作为标准的缩进大小。

我们之前看到的示例程序的每一行代码之间，都仅有最简单的顺序逻辑关系，因此每个示例程序都只有一个代码块，还不用考虑缩进的问题。但之后的程序示例将会变得更加复杂，将会包含多个代码块了。

Pythora 星球的居民最开始其实不是特别喜欢 Python 的这种设计。主要是觉得缩进是比较容易搞错的，很容易多几个、少几个空格。毕竟在其它语言中，缩进只影响美观不影响逻辑，因此它没那么重要，容易被忽视。不过，随着时间的推移，大家很快发现，担心是有些多余的，在习惯了 Python 的代码分块方式之后，这种缩进方式并没有导致更多的错误，而且它也确实可以提高代码的整洁度和可维护性。


## 代码执行流程

前文介绍过，如果有多行代码，程序一般会按照从上到下的顺序逐句运行。比如

```python
print("第一行")
print("第二行")
print("第三行")
```

但很多时候，我们是需要改变代码执行的流程的，比如在满足一定条件时，需要跳过部分代码，或重复执行部分代码。这时，就需要使用到控制结构来控制代码执行的流程。Python 主要的控制结构包括[条件判断](condition)和[循环结构](loop)，使程序能够根据条件进行分支或重复执行。

本书会在后面的章节详细讨论这两种控制结构，但是因为它们太过常用，有必要先简单介绍一下它们的基本用法，也可以帮助读者尽快了解 Python 的用法。

### 条件判断

Python 使用 `if` 和 `else` 关键字来执行条件判断。当遇到 if 语句时，会根据条件表达式的真假决定是否执行相应的代码块。满足条件时执行代码块，条件不满足则跳过：

```python
age = 18
if age >= 18:
    print("成年人")
else:
    print("未成年人")
```

在上面的代码中，程序会先判断 `age >= 18` 是否为 `True`，若条件为真则输出“成年人”；否则输出“未成年人”。

需要注意，`if` 和 `else` 下面的语句都有缩进。这表示 `if` 下面的语句属于一个新的代码块。



### 循环结构

Python 中有两种常用的循环结构：`for` 循环和 `while` 循环。

#### (1) `for` 循环

`for` 循环用于遍历序列（如列表、元组、字符串等）或范围内的数字。

```python
# 遍历列表
fruits = ["apple", "banana", "cherry"]
for fruit in fruits:
    print(fruit)

# 遍历范围
for i in range(3):  # range(3) 生成 0, 1, 2
    print(i)
```

在这里，`for` 循环依次将列表中的每个元素赋值给变量 `fruit` 并执行 `print(fruit)`。

#### (2) `while` 循环

`while` 循环在条件为 `True` 时反复执行代码块，直到条件为 `False` 时退出循环。

```python
count = 0
while count < 3:
    print("循环次数:", count)
    count += 1  # 更新 count 值，否则会变成死循环
```

在此示例中，`while` 循环会在 `count < 3` 为 `True` 时继续执行，一旦 `count` 达到 3，则退出循环。

### 3. 控制循环的关键字：`break` 和 `continue`

- **`break`**：立即退出当前循环，不再执行循环中的剩余部分。
  
  ```python
  for i in range(5):
      if i == 3:
          break
      print(i)  # 输出 0, 1, 2
  ```

- **`continue`**：跳过当前循环中的剩余代码，直接开始下一次循环。
  
  ```python
  for i in range(5):
      if i == 3:
          continue
      print(i)  # 输出 0, 1, 2, 4
  ```

### 4. `else` 与循环搭配

在 `for` 和 `while` 循环结构后，可以加上 `else` 子句。当循环正常结束时（未被 `break` 打断），`else` 部分会执行。

```python
for i in range(5):
    if i == 3:
        break
    print(i)
else:
    print("循环正常结束")  # 若未 break 则会执行此句
```

在这里，因为 `break` 打断了循环，所以 `else` 中的内容不会执行。



